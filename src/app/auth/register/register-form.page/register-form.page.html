<div>
  <form [formGroup]="registerForm">

    <label>
      Nom :
      <input id="username" type="text" formControlName="username" [attr.aria-invalid]="registerForm.controls.username.invalid" aria-describedby="username-error">
    </label>
    @if (registerForm.controls.username.invalid && registerForm.controls.username.touched) {
      <p id="username-error" class="error">Le nom est requis</p>
    }

    <label>
      Âge :
      <input id="age" type="number" formControlName="age" [attr.aria-invalid]="registerForm.controls.age.invalid" aria-describedby="age-error">
    </label>
    @if (registerForm.controls.age.invalid && registerForm.controls.age.touched) {
      <p id="age-error" class="error">Vous êtes trop jeune pour vous inscrire</p>
    }

    <label>
      E-mail :
      <input id="email" type="text" formControlName="email" [attr.aria-invalid]="registerForm.controls.email.invalid" aria-describedby="email-error">
    </label>
    @if (registerForm.controls.email.invalid && registerForm.controls.email.touched) {
      <p id="email-error" class="error">Format d'email invalide</p>
    }

    <label>
      numéro de téléphone :
      <input id="phone" type="text" formControlName="phone" [attr.aria-invalid]="registerForm.controls.phone.invalid" aria-describedby="phone-error">
    </label>
    @if (registerForm.controls.phone.invalid && registerForm.controls.phone.touched) {
      <p id="phone-error" class="error">Format de numéro invalide</p>
    }

    <div formArrayName="addresses">
      @for (address of addresse.controls; track $index) {
        <input id="adress" [formControlName]="$index" placeholder="Adresse" [value]="address.value">
        <button type="button" (click)="addresse.removeAt($index)">Supprimer</button>
      }
    </div>
    <button type="button" (click)="addresse.push(fb.control(''))">Ajouter une adresse</button>

    <label>
      Mot de passe :
      <input id="password" type="text" formControlName="password" [attr.aria-invalid]="registerForm.controls.password.invalid" aria-describedby="password-error">
    </label>
    @if (registerForm.controls.password.invalid && registerForm.controls.password.touched) {
      <p id="password-error" class="error">Format de mot de passe invalide</p>
    }

    <label>
      Confirmer le mot de passe :
      <input id="confirmPassword" type="text" formControlName="confirmPassword" [attr.aria-invalid]="registerForm.controls.confirmPassword.invalid" aria-describedby="confirmPassword-error">
    </label>
    @if (registerForm.controls.confirmPassword.invalid && registerForm.controls.confirmPassword.touched) {
      <p id="confirmPassword-error" class="error">Format de mot de passe invalide</p>
    }

    @if (registerForm.controls.password.valid && registerForm.controls.confirmPassword.valid) {
      @if (registerForm.controls.password != registerForm.controls.confirmPassword) {
        <p class="error">Les mots de passes sont différents</p>
      }
    }

    <button type="submit" [disabled]="registerForm.invalid">Envoyer</button>
  </form>
</div>


